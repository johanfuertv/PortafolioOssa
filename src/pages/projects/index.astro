---
const title = 'All My Projects | Johan Ossa';
const description = 'Project portfolio including mobile and web apps by Johan Ossa.';
import BaseLayout from '../../layouts/BaseLayout.astro';
import ProjectList from '../../components/ProjectList.astro';
import { Schema } from 'astro-seo-schema';

const projects = [
  {
    name: 'WhereToGo-App',
    description: 'An Android app to help users find places to visit based on preferences.',
    demoLink: 'https://github.com/johanfuertv/WhereToGo-App',
    githubUrl: 'https://github.com/johanfuertv/WhereToGo-App',
    tags: ['Android', 'Kotlin', 'Travel']
  },
  {
    name: 'Ossafit Quiz',
    description: 'A quiz app to test fitness knowledge, built for educational purposes.',
    demoLink: 'https://github.com/johanfuertv/ossafitquiz',
    githubUrl: 'https://github.com/johanfuertv/ossafitquiz',
    tags: ['Android', 'Java', 'Quiz']
  },
  {
    name: 'Calculadora e info personal',
    description: 'Android Studio app that combines a calculator with personal information display.',
    demoLink: 'https://github.com/johanfuertv/Calculadora-e-inf-personal-en-Android-Studio',
    githubUrl: 'https://github.com/johanfuertv/Calculadora-e-inf-personal-en-Android-Studio',
    tags: ['Android', 'Java', 'Tools']
  }
];
---

<BaseLayout title={title} description={description}>
  <div class='container'>
    <div class='mb-10 text-center animate-header'>
      <h1 class='text-3xl font-bold mb-2 header-element' data-delay='0'>All My Projects</h1>
      <p
        class='text-zinc-700 dark:text-zinc-300 text-lg header-element transition-all duration-300 ease-in-out cursor-default hover:transform hover:-translate-y-px hover:text-blue-500 dark:hover:text-blue-300'
        data-delay='1'>
        A portfolio of my mobile and web development projects.
      </p>
      <div class='flex justify-center header-element' data-delay='2'>
        <input
          id='project-search'
          type='text'
          placeholder='Search projects...'
          class='search-input mt-4 w-full max-w-md px-4 py-2 border border-zinc-300 dark:border-zinc-700 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 bg-white dark:bg-zinc-900 text-zinc-900 dark:text-zinc-100 transition-all duration-300 ease-out hover:transform hover:-translate-y-0.5 hover:shadow-lg hover:border-blue-500/50 focus:transform focus:-translate-y-0.5 focus:scale-102 focus:shadow-xl focus:shadow-blue-500/10'
          oninput='window.filterProjects && window.filterProjects()'
          autocomplete='off'
        />
      </div>
    </div>
    <div id='projects-list' class='projects-container transition-all duration-300 ease-in-out hover:transform hover:-translate-y-0.5'>
      {
        projects.length === 0 ? (
          <div class='text-gray-500 text-lg py-8 text-center'>No projects found.</div>
        ) : (
          <ProjectList projects={projects} />
        )
      }
    </div>
    <script is:inline type='module'>
      window.filterProjects = function () {
        const input = document.getElementById('project-search');
        const filter = input.value.toLowerCase();
        const allProjects = [...document.querySelectorAll('#projects-list > div > div')];
        let anyVisible = false;
        allProjects.forEach((card) => {
          const text = card.textContent.toLowerCase();
          if (text.includes(filter)) {
            card.style.display = '';
            anyVisible = true;
          } else {
            card.style.display = 'none';
          }
        });
        const emptyMsg = document.querySelector('#projects-list .text-gray-500');
        if (emptyMsg) emptyMsg.style.display = anyVisible ? 'none' : '';
      };
    </script>
  </div>

  <Schema
    item={{
      '@context': 'https://schema.org',
      '@type': 'CollectionPage',
      name: title,
      description: description,
      url: 'https://johanfuertv.github.io/projects/',
      author: {
        '@type': 'Person',
        name: 'Johan Ossa',
        url: 'https://github.com/johanfuertv'
      },
      hasPart: projects.map((project) => ({
        '@type': 'CreativeWork',
        name: project.name,
        description: project.description,
        url: project.demoLink,
        keywords: project.tags?.join(', '),
        inLanguage: 'en',
        ...(project.githubUrl && { sameAs: [project.githubUrl] })
      }))
    }}
  />
</BaseLayout>
